#!/usr/bin/env python3

import socket
import time
import umsgpack

RPORT = 9999
RHOST = "127.0.0.1"
BYTES = 4096

date_good = {"test_date": "01.01.1111"}
date_wrong = {"test_date": "01/01/1111"}


def chatting(msg_dict):
    print("Sending " + msg_dict['test_date'] + " .......")
    time.sleep(1)
    sock.send(umsgpack.dumps(msg_dict))

    print("Receiving .... ")
    time.sleep(1)
    rdata = sock.recv(BYTES)
    print(umsgpack.loads(rdata)["result"])


sock = socket.socket()
sock.connect((RHOST, RPORT))

chatting(date_good)
chatting(date_wrong)

sock.close()
